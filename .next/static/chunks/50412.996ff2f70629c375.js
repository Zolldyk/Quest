"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50412],{6865:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(12115);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},28960:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(12115);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},50412:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(95155),r=a(12115),l=a(28960),n=a(67695);let i=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}),o=r.forwardRef(function(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))});var c=a(6865),d=a(49112),m=a(98359),u=a(89629),x=a(45125);function h(){let e=(0,d.UD)(),{poolBalance:t,poolStats:a,isStaking:h,isUnstaking:b,getStakerInfo:p,stakeTokens:f,unstakeTokens:y,refetchPoolBalance:j,refetchPoolStats:w}=(0,m.hL)(),{getBalance:N,getAllowance:k,approveSpender:v,isApproving:S}=(0,m.Kp)(),[C,A]=(0,r.useState)(""),[B,U]=(0,r.useState)(""),[F,E]=(0,r.useState)("stake"),[D,M]=(0,r.useState)(null),[R,L]=(0,r.useState)(BigInt(0)),[I,P]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(!0),J="0x4f910ef3996d7C4763EFA2fEf15265e8b918cD0b";(0,r.useEffect)(()=>{(async()=>{if(!e){M(null),Y(!1);return}Y(!0);try{let s=BigInt(0),r=null,l=BigInt(0);try{let t=await N(e);t&&(s=t)}catch(e){console.warn("Failed to fetch USDC balance:",e)}try{r=await p(e)}catch(e){console.warn("Failed to fetch staker info:",e)}try{let t=await k(e,J);t&&(l=t)}catch(e){console.warn("Failed to fetch allowance:",e)}let n={totalPoolBalance:(0,m.NJ)(t||BigInt(0),6),totalStakers:Number(null==a?void 0:a[1])||0,totalRewards:(0,m.NJ)((null==a?void 0:a[2])||BigInt(0),6),minimumStake:(0,m.NJ)((null==a?void 0:a[3])||BigInt(0),6),userStaked:(0,m.NJ)((null==r?void 0:r.stakedAmount)||BigInt(0),6),userBalance:(0,m.NJ)(s,6)};M(n),L(l)}catch(e){console.error("Error fetching user data:",e),M({totalPoolBalance:"0",totalStakers:0,totalRewards:"0",minimumStake:"0",userStaked:"0",userBalance:"0"})}finally{Y(!1)}})()},[e,t,a,N,p,k,J]),(0,r.useEffect)(()=>{C&&R?P(R<(0,m.t6)(C,6)):P(!1)},[C,R]);let O=(0,r.useMemo)(()=>{if(!C||!D)return!1;let e=parseFloat(C),t=parseFloat(D.userBalance),a=parseFloat(D.minimumStake);return e>0&&e>=a&&e<=t},[C,D]),q=(0,r.useMemo)(()=>{if(!B||!D)return!1;let e=parseFloat(B),t=parseFloat(D.userStaked);return e>0&&e<=t},[B,D]),z=async()=>{if(C)try{let t=(0,m.t6)(C,6);await v(J,t);let a=await k(e,J);L(a||BigInt(0))}catch(e){console.error("Approval failed:",e)}},Z=async()=>{if(O&&C)try{let e=(0,m.t6)(C,6);await f(e),A(""),await Promise.all([j(),w()])}catch(e){console.error("Staking failed:",e)}},_=async()=>{if(q&&B)try{let e=(0,m.t6)(B,6);await y(e),U(""),await Promise.all([j(),w()])}catch(e){console.error("Unstaking failed:",e)}};return e?(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Staking Pool"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Stake USDC to fund quest rewards and support the community"})]}),W?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)(x.Ay,{size:"lg"})}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)(l.A,{className:"h-6 w-6 text-primary-600 mr-3"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Pool Statistics"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(g,{label:"Total Pool Balance",value:"".concat((null==D?void 0:D.totalPoolBalance)||"0"," USDC"),icon:(0,s.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full"})}),(0,s.jsx)(g,{label:"Total Stakers",value:(null==D?void 0:D.totalStakers.toString())||"0",icon:(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})}),(0,s.jsx)(g,{label:"Rewards Distributed",value:"".concat((null==D?void 0:D.totalRewards)||"0"," USDC"),icon:(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-400 rounded-full"})}),(0,s.jsx)(g,{label:"Minimum Stake",value:"".concat((null==D?void 0:D.minimumStake)||"0"," USDC"),icon:(0,s.jsx)(n.A,{className:"h-4 w-4 text-gray-400"})})]}),D&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Your Position"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g,{label:"Your Stake",value:"".concat(D.userStaked," USDC"),highlight:parseFloat(D.userStaked)>0}),(0,s.jsx)(g,{label:"Available Balance",value:"".concat(D.userBalance," USDC")})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex mb-6",children:[(0,s.jsxs)("button",{onClick:()=>E("stake"),className:"flex-1 py-3 px-4 text-center font-medium rounded-l-lg border-2 transition-colors ".concat("stake"===F?"bg-primary-50 text-primary-700 border-primary-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"),children:[(0,s.jsx)(i,{className:"h-4 w-4 inline mr-2"}),"Stake"]}),(0,s.jsxs)("button",{onClick:()=>E("unstake"),className:"flex-1 py-3 px-4 text-center font-medium rounded-r-lg border-2 border-l-0 transition-colors ".concat("unstake"===F?"bg-primary-50 text-primary-700 border-primary-200":"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"),children:[(0,s.jsx)(o,{className:"h-4 w-4 inline mr-2"}),"Unstake"]})]}),"stake"===F&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Stake (USDC)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:C,onChange:e=>A(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pr-20",placeholder:"0.00",min:"0",step:"0.01"}),(0,s.jsx)("button",{onClick:()=>{D&&A(D.userBalance)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-primary-600 hover:text-primary-800 font-medium",children:"MAX"})]}),D&&C&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Available: ",D.userBalance," USDC | Minimum: ",D.minimumStake," USDC"]})]}),C&&D&&(0,s.jsxs)("div",{className:"text-sm",children:[parseFloat(C)>parseFloat(D.userBalance)&&(0,s.jsxs)("p",{className:"text-red-600 flex items-center",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-1"}),"Insufficient balance"]}),parseFloat(C)<parseFloat(D.minimumStake)&&parseFloat(C)>0&&(0,s.jsxs)("p",{className:"text-yellow-600 flex items-center",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-1"}),"Below minimum stake amount"]}),O&&(0,s.jsxs)("p",{className:"text-green-600 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Ready to stake"]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[I&&(0,s.jsx)("button",{onClick:z,disabled:!O||S,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Ay,{size:"sm",className:"mr-2"}),"Approving..."]}):"Approve ".concat(C," USDC")}),(0,s.jsx)("button",{onClick:Z,disabled:!O||I||h,className:"w-full bg-primary-600 hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Ay,{size:"sm",className:"mr-2"}),"Staking..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i,{className:"h-4 w-4 mr-2"}),"Stake USDC"]})})]})]}),"unstake"===F&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Unstake (USDC)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",value:B,onChange:e=>U(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 pr-20",placeholder:"0.00",min:"0",step:"0.01"}),(0,s.jsx)("button",{onClick:()=>{D&&U(D.userStaked)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm text-primary-600 hover:text-primary-800 font-medium",children:"MAX"})]}),D&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Your stake: ",D.userStaked," USDC"]})]}),B&&D&&(0,s.jsxs)("div",{className:"text-sm",children:[parseFloat(B)>parseFloat(D.userStaked)&&(0,s.jsxs)("p",{className:"text-red-600 flex items-center",children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-1"}),"Amount exceeds your stake"]}),q&&(0,s.jsxs)("p",{className:"text-green-600 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Ready to unstake"]})]}),(0,s.jsx)("button",{onClick:_,disabled:!q||b,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Ay,{size:"sm",className:"mr-2"}),"Unstaking..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o,{className:"h-4 w-4 mr-2"}),"Unstake USDC"]})}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(n.A,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Instant Unstaking"}),(0,s.jsx)("p",{children:"You can unstake your tokens at any time without penalties. Unstaked tokens will be returned to your wallet immediately."})]})]})})]})]})]}),(0,s.jsxs)("div",{className:"mt-12 bg-gradient-to-r from-primary-50 to-secondary-50 rounded-xl p-8",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"How Staking Works"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"1"}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Stake USDC"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Deposit USDC tokens into the shared pool to fund quest rewards"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"2"}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Fund Rewards"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Your staked tokens fund rewards for players completing quests"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"3"}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Support Community"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Help grow the ecosystem and enable more quest opportunities"})]})]}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("strong",{children:"Note:"})," Staking helps fund community rewards. You can unstake at any time without penalties. Future versions may include staking rewards."]})})]})]}):(0,s.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-sm border border-gray-200 text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Connect Your Wallet"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Connect your wallet to access staking features"}),(0,s.jsx)(u.Ay,{variant:"default"})]})}function g(e){let{label:t,value:a,icon:r,highlight:l=!1}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[r&&(0,s.jsx)("span",{className:"mr-2",children:r}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t})]}),(0,s.jsx)("span",{className:"font-semibold ".concat(l?"text-primary-600":"text-gray-900"),children:a})]})}},67695:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(12115);let r=s.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))})}}]);