"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13777],{5500:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(12115);let a=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))})},13777:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var l=s(95155),a=s(12115),r=s(49112),n=s(5500),i=s(28960),c=s(29675),d=s(27305),o=s(26884),m=s(10184),x=s(98359),u=s(45125),g=s(80749),h=s(95999);function p(){var e,t;let s=(0,r.UD)(),{stakingPool:o,questManager:m,nftMinter:p}=(0,x.n)(),[f,v]=(0,a.useState)(null),[w,y]=(0,a.useState)("overview"),[S,k]=(0,a.useState)(!0),[C,A]=(0,a.useState)([]),q=[{id:"overview",name:"Overview",icon:n.A},{id:"staking",name:"Staking",icon:i.A},{id:"quests",name:"Quest History",icon:c.A,count:null==f?void 0:f.questsCompleted},{id:"nfts",name:"NFT Badges",icon:d.A,count:null==f?void 0:f.nftBadges}];return(0,a.useEffect)(()=>{let e=setTimeout(async()=>{if(!s){v(null),k(!1);return}if(!o.contract||!m.contract||!p.contract){console.warn("Contracts not yet available, setting default stats"),v({totalStaked:"0",totalEarned:"0",questsCompleted:0,nftBadges:0,pendingSubmissions:0}),k(!1);return}k(!0);try{let[e,t,l]=await Promise.allSettled([o.getStakerInfo(s).catch(e=>(console.warn("Failed to fetch staker info:",e),null)),m.getPlayerSubmissions(s).catch(e=>(console.warn("Failed to fetch user submissions:",e),[])),p.getUserBadges(s).catch(e=>(console.warn("Failed to fetch user badges:",e),[]))]),a="fulfilled"===e.status?e.value:null,r="fulfilled"===t.status?t.value:[],n="fulfilled"===l.status?l.value:[],i=[];if(r&&r.length>0){let e=r.slice(-10);i=(await Promise.allSettled(e.map(e=>m.getSubmission(Number(e)).catch(t=>(console.warn("Failed to fetch submission ".concat(e,":"),t),null))))).filter(e=>"fulfilled"===e.status&&null!==e.value).map(e=>e.value)}A(i.slice(-5));let c=i.filter(e=>1===e.status).length,d=+c,u=i.filter(e=>0===e.status).length,g={totalStaked:(0,x.NJ)((null==a?void 0:a.stakedAmount)||BigInt(0),6),totalEarned:d.toString(),questsCompleted:c,nftBadges:(null==n?void 0:n.length)||0,pendingSubmissions:u};v(g)}catch(e){console.error("Error fetching dashboard data:",e),v({totalStaked:"0",totalEarned:"0",questsCompleted:0,nftBadges:0,pendingSubmissions:0})}finally{k(!1)}},100);return()=>clearTimeout(e)},[s,o,m,p]),(0,l.jsx)("div",{className:"space-y-6",children:S?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,l.jsx)(u.Qv,{},t))}),(0,l.jsx)(u.Qv,{})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-6",children:[(0,l.jsx)(b,{title:"Total Staked",value:"".concat((null==f?void 0:f.totalStaked)||"0"," USDC"),icon:(0,l.jsx)(i.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),bgColor:"bg-blue-50",textColor:"text-blue-600"}),(0,l.jsx)(b,{title:"Total Earned",value:"".concat((null==f?void 0:f.totalEarned)||"0"," USDC"),icon:(0,l.jsx)(c.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),bgColor:"bg-green-50",textColor:"text-green-600"}),(0,l.jsx)(b,{title:"Quests Completed",value:(null==f||null==(e=f.questsCompleted)?void 0:e.toString())||"0",icon:(0,l.jsx)(n.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600"}),bgColor:"bg-purple-50",textColor:"text-purple-600"}),(0,l.jsx)(b,{title:"NFT Badges",value:(null==f||null==(t=f.nftBadges)?void 0:t.toString())||"0",icon:(0,l.jsx)(d.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),bgColor:"bg-orange-50",textColor:"text-orange-600"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-gray-200 overflow-hidden",children:[(0,l.jsx)("div",{className:"border-b border-gray-200",children:(0,l.jsx)("nav",{className:"flex flex-wrap sm:space-x-8 px-4 sm:px-6 overflow-x-auto","aria-label":"Tabs",children:q.map(e=>(0,l.jsxs)("button",{onClick:()=>y(e.id),className:"\n                        flex items-center py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors whitespace-nowrap\n                        ".concat(w===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n                      "),children:[(0,l.jsx)(e.icon,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 flex-shrink-0"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:e.name}),(0,l.jsx)("span",{className:"sm:hidden",children:e.name.split(" ")[0]}),void 0!==e.count&&e.count>0&&(0,l.jsx)("span",{className:"\n                          ml-1 sm:ml-2 py-0.5 px-1.5 sm:px-2 rounded-full text-xs font-medium\n                          ".concat(w===e.id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600","\n                        "),children:e.count})]},e.id))})}),(0,l.jsxs)("div",{className:"p-4 sm:p-6",children:["overview"===w&&(0,l.jsx)(j,{stats:f,recentSubmissions:C}),"staking"===w&&(0,l.jsx)(g.default,{}),"quests"===w&&(0,l.jsx)(h.default,{}),"nfts"===w&&(0,l.jsx)(N,{})]})]})]})})}function b(e){let{title:t,value:s,icon:a,bgColor:r,textColor:n}=e;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,l.jsx)("div",{className:"".concat(r," p-1.5 sm:p-2 rounded-lg flex-shrink-0"),children:a}),(0,l.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,l.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:t}),(0,l.jsx)("p",{className:"text-sm sm:text-lg lg:text-xl font-bold ".concat(n," truncate"),children:s})]})]})})}function j(e){let{stats:t,recentSubmissions:s}=e;return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[(0,l.jsx)(f,{title:"Stake USDC",description:"Fund the quest reward pool",href:"/staking",icon:(0,l.jsx)(i.A,{className:"h-4 w-4 sm:h-5 sm:w-5"}),color:"blue"}),(0,l.jsx)(f,{title:"Browse Quests",description:"Find new quests to complete",href:"/quests",icon:(0,l.jsx)(c.A,{className:"h-4 w-4 sm:h-5 sm:w-5"}),color:"green"}),(0,l.jsx)(f,{title:"View NFTs",description:"See your earned badges",href:"#",onClick:()=>{},icon:(0,l.jsx)(d.A,{className:"h-4 w-4 sm:h-5 sm:w-5"}),color:"purple"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),s.length>0&&(0,l.jsx)("button",{className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View All"})]}),(0,l.jsx)("div",{className:"space-y-3",children:0===s.length?(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,l.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,l.jsx)("p",{children:"No recent activity"}),(0,l.jsx)("p",{className:"text-sm",children:"Complete your first quest to get started!"})]}):s.map((e,t)=>(0,l.jsx)(v,{submission:e},t))})]}),t&&(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Summary"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:t.totalStaked}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"USDC Staked"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.totalEarned}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"USDC Earned"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:t.questsCompleted}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Quests Done"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:t.nftBadges}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"NFT Badges"})]})]})]})]})}function f(e){let{title:t,description:s,href:a,onClick:r,icon:n,color:i}=e;return(0,l.jsxs)(a?"a":"button",{...a?{href:a}:{onClick:r},className:"\n        block p-3 sm:p-4 border-2 rounded-lg transition-colors hover:bg-gray-50\n        ".concat({blue:"border-blue-200 hover:border-blue-300 text-blue-600",green:"border-green-200 hover:border-green-300 text-green-600",purple:"border-purple-200 hover:border-purple-300 text-purple-600"}[i],"\n      "),children:[(0,l.jsxs)("div",{className:"flex items-center mb-2",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:n}),(0,l.jsx)("h4",{className:"ml-2 font-medium text-gray-900 text-sm sm:text-base truncate",children:t})]}),(0,l.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:s})]})}function v(e){let{submission:t}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(c.A,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"font-medium text-gray-900",children:["Quest #",t.questId.toString()]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Submitted ",new Date(1e3*Number(t.submitTime)).toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("span",{className:"\n          px-2 py-1 rounded-full text-xs font-medium\n          ".concat((e=>{switch(e){case 0:return"text-yellow-600 bg-yellow-50";case 1:return"text-green-600 bg-green-50";case 2:return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(t.status),"\n        "),children:(e=>{switch(e){case 0:return"Pending";case 1:return"Completed";case 2:return"Rejected";default:return"Unknown"}})(t.status)}),(0,l.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(m.A,{className:"h-4 w-4"})})]})]})}function N(){return(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(d.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"NFT Badges"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Your earned quest badges will appear here"})]})}}}]);