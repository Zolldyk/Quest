"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80749],{27572:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(12115);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))})},28960:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(12115);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},67695:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(12115);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))})},80749:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(95155),l=s(12115),r=s(49112),n=s(28960);let i=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))});var o=s(27572);let c=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}),d=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),m=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))});var x=s(67695),u=s(82771),g=s(98359),h=s(45125);function p(){var e,t,s,p,j,v,y;let N=(0,r.UD)(),{poolBalance:k,poolStats:w,getStakerInfo:S,stakeTokens:A,unstakeTokens:C,isStaking:B,isUnstaking:E,refetchPoolBalance:D,refetchPoolStats:I}=(0,g.hL)(),{getBalance:U,getAllowance:F,approveSpender:L,isApproving:M}=(0,g.Kp)(),[J,R]=(0,l.useState)(null),[O,P]=(0,l.useState)(!0),[Q,W]=(0,l.useState)(""),[H,T]=(0,l.useState)("stake"),[Y,_]=(0,l.useState)(BigInt(0)),z="0x4f910ef3996d7C4763EFA2fEf15265e8b918cD0b";(0,l.useEffect)(()=>{(async()=>{if(!N){R(null),P(!1);return}P(!0);try{let e=null,t=BigInt(0),s=BigInt(0);try{e=await S(N)}catch(e){console.warn("Failed to fetch staker info:",e)}try{let e=await U(N);e&&(t=e)}catch(e){console.warn("Failed to fetch USDC balance:",e)}try{let e=await F(N,z);e&&(s=e)}catch(e){console.warn("Failed to fetch allowance:",e)}let a=k||BigInt(0),l=(null==e?void 0:e.stakedAmount)||BigInt(0),r=a>BigInt(0)?Number(l)/Number(a)*100:0,n=(null==e?void 0:e.isActive)?[{type:"stake",amount:(0,g.NJ)(e.stakedAmount,6),timestamp:1e3*Number(e.stakeTimestamp)}]:[],i={stakerInfo:e,poolStats:w?{totalPoolBalance:w[0],totalStakers:w[1],totalRewardsDistributed:w[2],minimumStakeAmount:w[3]}:null,userBalance:(0,g.NJ)(t,6),stakingShare:r,stakingHistory:n};R(i),_(s)}catch(e){console.error("Error fetching staking data:",e),R({stakerInfo:null,poolStats:null,userBalance:"0",stakingShare:0,stakingHistory:[]})}finally{P(!1)}})()},[N,k,w,S,U,F,z]);let Z=(0,l.useMemo)(()=>!!Q&&"stake"===H&&parseFloat(Q)>parseFloat((0,g.NJ)(Y,6)),[Q,H,Y]),q=(0,l.useMemo)(()=>{var e,t;if(!Q||!J)return!1;let s=parseFloat(Q);if("stake"===H){let t=parseFloat(J.userBalance),a=parseFloat((0,g.NJ)(null==(e=J.poolStats)?void 0:e.minimumStakeAmount,6));return s>0&&s>=a&&s<=t&&!Z}{let e=parseFloat((0,g.NJ)(null==(t=J.stakerInfo)?void 0:t.stakedAmount,6));return s>0&&s<=e}},[Q,H,J,Z]),K=async()=>{if(Q)try{let e=BigInt(Q)*BigInt(1e6);await L(z,e);let t=await F(N,z);_(t||BigInt(0))}catch(e){console.error("Approval failed:",e)}},V=async()=>{if(q&&Q)try{let e=BigInt(Q)*BigInt(1e6);"stake"===H?await A(e):await C(e),W(""),await Promise.all([D(),I()])}catch(e){console.error("Quick action failed:",e)}},X=async()=>{await Promise.all([D(),I()]),window.location.reload()};return O?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(h.Qv,{}),(0,a.jsx)(h.Qv,{}),(0,a.jsx)(h.Qv,{})]}),(0,a.jsx)(h.Qv,{}),(0,a.jsx)(h.Qv,{})]}):J?(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Staking Overview"}),(0,a.jsxs)("button",{onClick:X,className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(i,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)(b,{title:"Your Stake",value:"".concat((0,g.NJ)(null==(e=J.stakerInfo)?void 0:e.stakedAmount,6)," USDC"),icon:(0,a.jsx)(n.A,{className:"h-5 w-5"}),color:"blue",subtitle:"".concat(J.stakingShare.toFixed(2),"% of pool")}),(0,a.jsx)(b,{title:"Available Balance",value:"".concat(J.userBalance," USDC"),icon:(0,a.jsx)(o.A,{className:"h-5 w-5"}),color:"green",subtitle:"Ready to stake"}),(0,a.jsx)(b,{title:"Pool Share",value:"".concat(J.stakingShare.toFixed(4),"%"),icon:(0,a.jsx)(c,{className:"h-5 w-5"}),color:"purple",subtitle:"Of total pool"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex mb-4",children:[(0,a.jsxs)("button",{onClick:()=>T("stake"),className:"flex-1 py-2 px-3 sm:px-4 rounded-l-lg border-2 font-medium transition-colors text-sm sm:text-base ".concat("stake"===H?"bg-green-50 text-green-700 border-green-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"),children:[(0,a.jsx)(d,{className:"h-3 w-3 sm:h-4 sm:w-4 inline mr-1 sm:mr-2"}),"Stake"]}),(0,a.jsxs)("button",{onClick:()=>T("unstake"),className:"flex-1 py-2 px-3 sm:px-4 rounded-r-lg border-2 border-l-0 font-medium transition-colors text-sm sm:text-base ".concat("unstake"===H?"bg-red-50 text-red-700 border-red-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"),children:[(0,a.jsx)(m,{className:"h-3 w-3 sm:h-4 sm:w-4 inline mr-1 sm:mr-2"}),"Unstake"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",value:Q,onChange:e=>W(e.target.value),className:"w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-12 sm:pr-16 text-sm sm:text-base",placeholder:"Amount to ".concat(H),min:"0",step:"0.01"}),(0,a.jsx)("button",{onClick:()=>{if(J)if("stake"===H)W(J.userBalance);else{var e;W((0,g.NJ)(null==(e=J.stakerInfo)?void 0:e.stakedAmount,6))}},className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-medium",children:"MAX"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[Z&&(0,a.jsx)("button",{onClick:K,disabled:!Q||M,className:"w-full bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-medium py-2 sm:py-3 px-3 sm:px-4 rounded-lg transition-colors flex items-center justify-center text-sm sm:text-base",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Ay,{size:"sm",color:"white",className:"mr-2"}),"Approving..."]}):"Approve ".concat(Q," USDC")}),(0,a.jsx)("button",{onClick:V,disabled:!q||Z||B||E,className:"w-full font-medium py-2 sm:py-3 px-3 sm:px-4 rounded-lg transition-colors flex items-center justify-center text-sm sm:text-base ".concat("stake"===H?"bg-green-600 hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white":"bg-red-600 hover:bg-red-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white"),children:B||E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Ay,{size:"sm",color:"white",className:"mr-2"}),"stake"===H?"Staking...":"Unstaking..."]}):(0,a.jsxs)(a.Fragment,{children:["stake"===H?(0,a.jsx)(d,{className:"h-4 w-4 mr-2"}):(0,a.jsx)(m,{className:"h-4 w-4 mr-2"}),"stake"===H?"Stake USDC":"Unstake USDC"]})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-3 sm:p-4 border border-gray-200",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3 text-sm sm:text-base",children:"stake"===H?"Staking Info":"Unstaking Info"}),(0,a.jsx)("div",{className:"space-y-2 text-xs sm:text-sm",children:"stake"===H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Available Balance:"}),(0,a.jsxs)("span",{className:"font-medium",children:[J.userBalance," USDC"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Minimum Stake:"}),(0,a.jsxs)("span",{className:"font-medium",children:[(0,g.NJ)(null==(t=J.poolStats)?void 0:t.minimumStakeAmount,6)," USDC"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Current Allowance:"}),(0,a.jsxs)("span",{className:"font-medium",children:[(0,g.NJ)(Y,6)," USDC"]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Your Stake:"}),(0,a.jsxs)("span",{className:"font-medium",children:[(0,g.NJ)(null==(s=J.stakerInfo)?void 0:s.stakedAmount,6)," USDC"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Staked Since:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==(p=J.stakerInfo)?void 0:p.stakeTimestamp)?new Date(1e3*Number(J.stakerInfo.stakeTimestamp)).toLocaleDateString():"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Instant Unstaking:"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:"âœ“ Available"})]})]})})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 mt-0.5 mr-2 sm:mr-3 flex-shrink-0"}),(0,a.jsx)("div",{className:"text-xs sm:text-sm text-blue-800",children:"stake"===H?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Staking Benefits"}),(0,a.jsx)("p",{children:"Your staked USDC helps fund quest rewards and supports the community ecosystem."})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Instant Unstaking"}),(0,a.jsx)("p",{children:"You can unstake your tokens at any time without penalties or waiting periods."})]})})]})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Staking History"}),0===J.stakingHistory.length?(0,a.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No staking history yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Your staking transactions will appear here"})]}):(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 text-sm font-medium text-gray-600",children:[(0,a.jsx)("span",{children:"Action"}),(0,a.jsx)("span",{children:"Amount"}),(0,a.jsx)("span",{children:"Date"}),(0,a.jsx)("span",{children:"Status"})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:J.stakingHistory.map((e,t)=>(0,a.jsx)(f,{event:e},t))})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-4 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Pool Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-600 break-all",children:(0,g.NJ)(null==(j=J.poolStats)?void 0:j.totalPoolBalance,6)}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Pool Balance (USDC)"})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:null==(v=J.poolStats)?void 0:v.totalStakers.toString()}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Stakers"})]}),(0,a.jsxs)("div",{className:"text-center space-y-1 sm:col-span-2 lg:col-span-1",children:[(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-purple-600 break-all",children:(0,g.NJ)(null==(y=J.poolStats)?void 0:y.totalRewardsDistributed,6)}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Rewards Distributed (USDC)"})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(n.A,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Staking Data"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Unable to load your staking information"})]})}function b(e){let{title:t,value:s,icon:l,color:r,subtitle:n}=e,i={blue:"text-blue-600 bg-blue-50",green:"text-green-600 bg-green-50",purple:"text-purple-600 bg-purple-50"};return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-gray-200 p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2 space-x-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg flex-shrink-0 ".concat(i[r]),children:l}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:t}),(0,a.jsx)("p",{className:"text-base sm:text-xl font-bold ".concat(i[r].split(" ")[0]," truncate"),children:s})]})]}),n&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 truncate",children:n})]})}function f(e){let{event:t}=e,s="stake"===t.type;return(0,a.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-3 ".concat(s?"bg-green-400":"bg-red-400")}),(0,a.jsx)("span",{className:"capitalize font-medium text-gray-900",children:t.type})]}),(0,a.jsxs)("span",{className:"font-medium ".concat(s?"text-green-600":"text-red-600"),children:[s?"+":"-",t.amount," USDC"]}),(0,a.jsx)("span",{className:"text-gray-600",children:new Date(t.timestamp).toLocaleDateString()}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Completed"})})]})})}}}]);