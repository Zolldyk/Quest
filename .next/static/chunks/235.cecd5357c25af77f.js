"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{12235:(e,t,s)=>{s.r(t),s.d(t,{EmptyQuestState:()=>N,QuestStats:()=>j,default:()=>p});var r=s(95155),l=s(12115),a=s(49112),n=s(29675),i=s(6865),o=s(82771),d=s(28960),c=s(12513),m=s(54445),x=s(55628),u=s(29509),h=s(98359),g=s(45125),b=s(74822);function p(e){let{className:t=""}=e,s=(0,a.UD)(),{activeQuests:i,defaultQuestId:o,getQuest:d,hasPlayerCompleted:c,hasPlayerSubmitted:m,refetchActiveQuests:x}=(0,h.rn)(),[u,p]=(0,l.useState)([]),[j,N]=(0,l.useState)({}),[y,w]=(0,l.useState)({}),[v,q]=(0,l.useState)(!0),[C,S]=(0,l.useState)(null),[A,Q]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{(async()=>{console.log("\uD83D\uDD0D QuestDisplay: Starting fetchQuestDetails",{activeQuests:i,activeQuestsType:typeof i,isArray:Array.isArray(i),defaultQuestId:o}),q(!0);try{let e=[],t=[];try{if(Array.isArray(i)&&i.length>0){t=i,console.log("✅ QuestDisplay: Got active quests array:",t);let s=t.map(async e=>{try{return await d(Number(e))}catch(t){return console.warn("Failed to fetch quest ".concat(e,":"),t),null}});e=(await Promise.all(s)).filter(e=>null!==e),console.log("✅ QuestDisplay: Fetched valid quests:",e.length)}else console.log("⚠️ QuestDisplay: No active quests from contract, activeQuests:",i)}catch(e){console.warn("❌ QuestDisplay: Error processing activeQuests:",e)}if(0===e.length&&(console.log("\uD83D\uDCDD QuestDisplay: Using fallback quest for demo"),e=[{questId:BigInt(1),title:"Quest dApp Twitter Challenge",description:"Help spread the word about Quest dApp and earn your first reward! Share your thoughts about decentralized quest platforms on Twitter.",requirements:"1. Post a tweet mentioning @QuestDApp\n2. Include hashtag #EtherlinkQuest\n3. Share what you love about decentralized quest platforms\n4. Make sure your tweet is public",rewardAmount:BigInt(1e6),isActive:!0,startTime:BigInt(Math.floor(Date.now()/1e3)-86400),endTime:BigInt(Math.floor(Date.now()/1e3)+2592e3),maxCompletions:BigInt(1e3),currentCompletions:BigInt(15),creator:"0x0000000000000000000000000000000000000000",createTime:BigInt(Math.floor(Date.now()/1e3)-86400)}]),p(e),s&&e.length>0)try{let t=e.map(async e=>{try{let[t,r]=await Promise.all([c(s,Number(e.questId)),m(s,Number(e.questId))]);return{questId:e.questId.toString(),completed:t,submitted:r}}catch(t){return console.warn("Failed to check status for quest ".concat(e.questId,":"),t),{questId:e.questId.toString(),completed:!1,submitted:!1}}}),r=await Promise.all(t),l=Object.fromEntries(r.map(e=>[e.questId,e.completed])),a=Object.fromEntries(r.map(e=>[e.questId,e.submitted]));N(l),w(a)}catch(e){console.warn("Error checking quest status:",e)}}catch(e){console.error("Error fetching quest details:",e),p([{questId:BigInt(1),title:"Welcome Quest",description:"Complete your first social media quest to get started with Quest dApp",requirements:"Share about Quest dApp on Twitter with #EtherlinkQuest hashtag",rewardAmount:BigInt(1e6),isActive:!0,startTime:BigInt(Math.floor(Date.now()/1e3)-86400),endTime:BigInt(Math.floor(Date.now()/1e3)+2592e3),maxCompletions:BigInt(1e3),currentCompletions:BigInt(0),creator:"0x0000000000000000000000000000000000000000",createTime:BigInt(Math.floor(Date.now()/1e3)-86400)}])}finally{q(!1)}})()},[i,s,o]),v)?(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 ".concat(t),children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2 animate-pulse"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-96 animate-pulse"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)(g.Qv,{}),(0,r.jsx)(g.Qv,{})]})]}):u.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6 ".concat(t),children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Available Quests"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Complete social media quests to earn USDC rewards and NFT badges"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-7xl mx-auto",children:u.map(e=>(0,r.jsx)(f,{quest:e,userAddress:s,hasCompleted:j[e.questId.toString()]||!1,hasSubmitted:y[e.questId.toString()]||!1,canSubmit:!!s&&!j[e.questId.toString()]&&!y[e.questId.toString()],onSubmit:()=>{S(e),Q(!0)}},e.questId.toString()))}),(0,r.jsxs)("div",{className:"mt-12 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-8",children:[(0,r.jsx)("h3",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"How to Complete Quests"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"1"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Connect Wallet"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Connect your Web3 wallet to participate in quests"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"2"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Complete Task"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Follow the quest requirements (e.g., post tweet with hashtag)"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"3"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Submit Proof"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Submit the URL of your post as proof of completion"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg mx-auto mb-4",children:"4"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Get Rewards"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Receive USDC tokens and mint an NFT badge after verification"})]})]})]})]}),A&&C&&(0,r.jsx)(b.default,{quest:C,onClose:()=>Q(!1),onSuccess:()=>{Q(!1),S(null),x(),s&&u.length>0&&u.forEach(async e=>{let t=await c(s,Number(e.questId));N(s=>({...s,[e.questId.toString()]:t}))})}})]}):(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6 ".concat(t),children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(n.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Quests"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Check back later for new quests to complete!"})]})})}function f(e){let{quest:t,userAddress:s,hasCompleted:l,hasSubmitted:a,canSubmit:g,onSubmit:b}=e,p=t.maxCompletions>BigInt(0)?Number(t.currentCompletions)/Number(t.maxCompletions)*100:0,f=t.currentCompletions>=t.maxCompletions,j=Date.now()>1e3*Number(t.endTime),N=l?"completed":a?"submitted":j?"expired":f?"full":s?"available":"connect-required";return(0,r.jsxs)("div",{className:"\n      relative bg-white rounded-xl shadow-lg border-2 p-8 transition-all duration-200 hover:shadow-xl\n      ".concat({completed:"border-green-200 bg-green-50",submitted:"border-yellow-200 bg-yellow-50",expired:"border-gray-200 bg-gray-50",full:"border-orange-200 bg-orange-50","connect-required":"border-gray-200 bg-white",available:"border-blue-200 bg-blue-50 hover:border-blue-300 hover:bg-blue-100"}[N],"\n    "),children:[(0,r.jsxs)("div",{className:"absolute top-6 right-6",children:[l&&(0,r.jsxs)("div",{className:"bg-green-100 text-green-800 text-xs font-medium px-3 py-1.5 rounded-full flex items-center shadow-sm",children:[(0,r.jsx)(i.A,{className:"h-3 w-3 mr-1.5"}),"Completed"]}),a&&!l&&(0,r.jsxs)("div",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-3 py-1.5 rounded-full flex items-center shadow-sm",children:[(0,r.jsx)(o.A,{className:"h-3 w-3 mr-1.5"}),"Pending Review"]}),j&&!l&&!a&&(0,r.jsx)("div",{className:"bg-gray-100 text-gray-800 text-xs font-medium px-3 py-1.5 rounded-full shadow-sm",children:"Expired"}),f&&!l&&!a&&!j&&(0,r.jsx)("div",{className:"bg-orange-100 text-orange-800 text-xs font-medium px-3 py-1.5 rounded-full shadow-sm",children:"Full"})]}),(0,r.jsxs)("div",{className:"mb-6 pr-24",children:[(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(n.A,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 ml-3 leading-tight",children:t.title})]}),(0,r.jsx)("p",{className:"text-gray-600 text-base leading-relaxed line-clamp-3",children:t.description})]}),(0,r.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center text-base text-gray-700",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)(d.A,{className:"h-4 w-4 text-green-600"})}),(0,r.jsxs)("span",{className:"font-semibold",children:[(0,h.NJ)(t.rewardAmount,6)," USDC Reward"]})]}),(0,r.jsxs)("div",{className:"flex items-center text-base text-gray-700",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)(c.A,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("span",{children:[t.currentCompletions.toString(),"/",t.maxCompletions.toString()," completed"]})]}),(0,r.jsxs)("div",{className:"flex items-center text-base text-gray-700",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:(0,r.jsx)(o.A,{className:"h-4 w-4 text-purple-600"})}),(0,r.jsx)("span",{children:j?"Expired":"Ends ".concat(new Date(1e3*Number(t.endTime)).toLocaleDateString())})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm font-medium text-gray-700 mb-3",children:[(0,r.jsx)("span",{children:"Quest Progress"}),(0,r.jsxs)("span",{children:[Math.round(p),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(100===p?"bg-green-500":"bg-gradient-to-r from-blue-500 to-blue-600"),style:{width:"".concat(Math.min(p,100),"%")}})})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quest Requirements"}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200",children:(0,r.jsx)("div",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:t.requirements})}),t.requirements.includes("#EtherlinkQuest")&&(0,r.jsx)("div",{className:"mt-4 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2 flex items-center",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 text-blue-600 mr-2"}),(0,r.jsx)("span",{className:"font-mono text-blue-800 font-medium",children:"#EtherlinkQuest"})]})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[s?l?(0,r.jsxs)("button",{className:"w-full bg-green-100 hover:bg-green-200 text-green-800 font-semibold py-4 px-6 rounded-xl cursor-default transition-colors border border-green-200",disabled:!0,children:[(0,r.jsx)(i.A,{className:"h-5 w-5 inline mr-3"}),"Quest Completed Successfully"]}):a?(0,r.jsxs)("button",{className:"w-full bg-yellow-100 hover:bg-yellow-200 text-yellow-800 font-semibold py-4 px-6 rounded-xl cursor-default transition-colors border border-yellow-200",disabled:!0,children:[(0,r.jsx)(o.A,{className:"h-5 w-5 inline mr-3"}),"Submitted - Awaiting Review"]}):j?(0,r.jsx)("button",{className:"w-full bg-gray-100 text-gray-500 font-semibold py-4 px-6 rounded-xl cursor-default border border-gray-200",disabled:!0,children:"Quest Expired"}):f?(0,r.jsxs)("button",{className:"w-full bg-orange-100 hover:bg-orange-200 text-orange-800 font-semibold py-4 px-6 rounded-xl cursor-default transition-colors border border-orange-200",disabled:!0,children:[(0,r.jsx)(x.A,{className:"h-5 w-5 inline mr-3"}),"Maximum Completions Reached"]}):(0,r.jsxs)("button",{onClick:b,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 mr-3"}),"Start Quest"]}):(0,r.jsxs)("div",{className:"text-center py-4 bg-gray-50 rounded-xl border border-gray-200",children:[(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"Connect wallet to participate"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Get started with Web3 quests"})]}),g&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-sm text-gray-600 bg-blue-50 rounded-lg py-2 px-4 border border-blue-100",children:"\uD83D\uDCA1 Complete the social media task, then return here to submit proof"})})]})]})}function j(e){let{quests:t,userCompletions:s}=e,l=t.length,a=t.reduce((e,t)=>e+Number(t.currentCompletions),0),n=t.reduce((e,t)=>e+Number(t.rewardAmount)*Number(t.currentCompletions),0);return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-card border border-gray-200 p-6 mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quest Statistics"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:l}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Active Quests"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Completions"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(0,h.NJ)({_hex:n.toString(16),_isBigNumber:!0},6)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"USDC Distributed"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Your Completions"})]})]})]})}function N(){return(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(n.A,{className:"h-20 w-20 text-gray-300 mx-auto mb-6"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Quests Available"}),(0,r.jsx)("p",{className:"text-gray-600 max-w-md mx-auto mb-8",children:"There are currently no active quests. New quests are added regularly, so check back soon for opportunities to earn rewards!"}),(0,r.jsx)("div",{className:"max-w-md mx-auto bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(n.A,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),(0,r.jsxs)("div",{className:"text-left text-sm text-blue-800",children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"Want to create quests?"}),(0,r.jsx)("p",{children:"Quest creators and community members can propose new quests. Join our Discord to get involved!"})]})]})})]})}}}]);