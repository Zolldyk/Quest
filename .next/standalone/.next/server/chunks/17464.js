"use strict";exports.id=17464,exports.ids=[17464],exports.modules={17464:(a,b,c)=>{c.d(b,{autoConnectWC:()=>u,connectWC:()=>t});var d=c(44293),e=c(47716),f=c(66997),g=c(64656),h=c(77184),i=c(43533),j=c(21984),k=c(21267),l=c(8608),m=c(40737),n=c(27312),o=c(20218),p=c(71276),q=c(21835);let r=null,s={lastUsedChainId:"tw.wc.lastUsedChainId",requestedChains:"tw.wc.requestedChains"};async function t(a,b,c,d,e){let f=await v(a,c,e),h=a.walletConnect,{onDisplayUri:i}=h||{};if(!i&&e){let a=await (0,n.u)(c);i=b=>{let c=a.mobile.native||a.mobile.universal;if(!c)return void e(b);e((0,m.YP)(c,b).redirect)}}i&&f.events.addListener("display_uri",i);let j=h?.optionalChains,k=a.chain;"global.safe"===c&&(j=A.map(g.Q4),k&&!j.includes(k)&&(k=void 0));let{chains:o,rpcMap:r}=function(a){let b={},c=[];a.chain&&(b[a.chain.id]=(0,g.r8)({chain:a.chain,client:a.client}),c.push(a.chain.id));let d=(a?.optionalChains||[]).slice(0,10);for(let e of d)b[e.id]=(0,g.r8)({chain:e,client:a.client}),c.push(e.id);return a.chain||0!==d.length||(b[1]=(0,g.Q4)(1).rpc,c.push(1)),{chains:c.map(a=>`eip155:${a}`),rpcMap:b}}({chain:k,client:a.client,optionalChains:j});f.session||await f.connect({...h?.pairingTopic?{pairingTopic:h?.pairingTopic}:{},namespaces:{[q.C]:{chains:o,events:["chainChanged","accountsChanged"],methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_switchEthereumChain","wallet_addEthereumChain"],rpcMap:r}}}),z(o.map(a=>Number(a.split(":")[1])),d);let s=o[0]?.split(":")[1]||1,t=(0,p.A)(s),u=(await f.request({method:"eth_requestAccounts",params:[]},`eip155:${t}`))[0];if(!u)throw Error("No accounts found on provider.");let w=a.chain&&a.chain.id===t?a.chain:(0,g.Q4)(t);if(a){let b={chain:a.chain,optionalChains:a.walletConnect?.optionalChains,pairingTopic:a.walletConnect?.pairingTopic};d&&(0,l.O7)(d,c,b)}return h?.onDisplayUri&&f.events.removeListener("display_uri",h.onDisplayUri),x(u,w,f,b,d,a.client)}async function u(a,b,c,d,e){let f=d?await (0,l.lh)(d,c):null,h=await v(f?{chain:f.chain,client:a.client,walletConnect:{optionalChains:f.optionalChains,pairingTopic:f.pairingTopic}}:{client:a.client,walletConnect:{}},c,e),i=(await h.enable())[0];if(!i)throw Error("No accounts found on provider.");let j=a.chain?.id||1,k=(0,p.A)(j);return x(i,a.chain&&a.chain.id===k?a.chain:(0,g.Q4)(k),h,b,d,a.client)}async function v(a,b,d){if(r)return r;let e=await (0,n.u)(b),f=a.walletConnect,{UniversalProvider:h}=await c.e(35088).then(c.bind(c,35088)),i=f?.optionalChains,j=a.chain;"global.safe"===b&&(i=A.map(g.Q4),j&&!i.includes(j)&&(j=void 0));let k=await h.init({metadata:{description:f?.appMetadata?.description||(0,o.o)().description,icons:[f?.appMetadata?.logoUrl||(0,o.o)().logoUrl],name:f?.appMetadata?.name||(0,o.o)().name,url:f?.appMetadata?.url||(0,o.o)().url},projectId:f?.projectId||q.S});if(k.events.setMaxListeners(1/0),"walletConnect"!==b){async function l(){let a=k.session?.peer?.metadata?.redirect?.native||e.mobile.native||e.mobile.universal;d&&a&&await d(a)}k.on("session_request_sent",l),k.events.addListener("disconnect",()=>{k.off("session_request_sent",l),r=null})}return r=k,k}function w({provider:a,address:b,client:c,chain:e}){return{address:(0,h.bv)(b),async sendTransaction(d){let e=await a.request({method:"eth_sendTransaction",params:[{data:d.data,from:(0,h.bv)(b),gas:d.gas?(0,i.cK)(d.gas):void 0,to:d.to,value:d.value?(0,i.cK)(d.value):void 0}]},`eip155:${d.chainId}`);return(0,f.E)({chainId:d.chainId,client:c,contractAddress:d.to??void 0,gasPrice:d.gasPrice,transactionHash:e,walletAddress:(0,h.bv)(b),walletType:"walletConnect"}),{transactionHash:e}},async signMessage({message:b}){let c="string"==typeof b?(0,i.i3)(b):b.raw instanceof Uint8Array?(0,i.EY)(b.raw):b.raw;return a.request({method:"personal_sign",params:[c,this.address]},`eip155:${e.id}`)},async signTypedData(b){let c=(0,k.y)(b),{domain:f,message:g,primaryType:h}=c,i={EIP712Domain:(0,d.H4)({domain:f}),...c.types};(0,d.$$)({domain:f,message:g,primaryType:h,types:i});let j=(0,d.v8)({domain:f??{},message:g,primaryType:h,types:i});return await a.request({method:"eth_signTypedData_v4",params:[this.address,j]},`eip155:${e.id}`)}}}function x(a,b,c,d,e,f){let i=w({address:a,chain:b,client:f,provider:c});async function j(){c.removeListener("accountsChanged",l),c.removeListener("chainChanged",m),c.removeListener("disconnect",k),await c.disconnect(),r=null}function k(){z([],e),e?.removeItem(s.lastUsedChainId),j(),d.emit("disconnect",void 0)}function l(a){if(a[0]){let e=w({address:(0,h.bv)(a[0]),chain:b,client:f,provider:c});d.emit("accountChanged",e),d.emit("accountsChanged",a)}else k()}function m(a){let b=(0,g.Q4)((0,p.A)(a));d.emit("chainChanged",b),e?.setItem(s.lastUsedChainId,String(a))}return c.on("accountsChanged",l),c.on("chainChanged",m),c.on("disconnect",k),c.on("session_delete",k),[i,b,j,a=>y(c,a)]}async function y(a,b){let c=b.id;try{a.setDefaultChain(`eip155:${c}`)}catch(b){let a="string"==typeof b?b:b?.message;if(/user rejected request/i.test(a))throw new e.vx(b);throw new e.ch(b)}}function z(a,b){b?.setItem(s.requestedChains,(0,j.stringify)(a))}let A=[1,0xaa36a7,42161,43114,8453,0x4e454152,84532,56,42220,100,10,137,1101,324,534352]},20482:(a,b,c)=>{c.d(b,{Ci:()=>g,J8:()=>i,MU:()=>k,Oz:()=>j,Pr:()=>h});var d=c(79320),e=c(89594),f=c(37502);class g extends e.C{constructor({body:a,cause:b,details:c,headers:e,status:g,url:h}){super("HTTP request failed.",{cause:b,details:c,metaMessages:[g&&`Status: ${g}`,`URL: ${(0,f.I)(h)}`,a&&`Request body: ${(0,d.A)(a)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=a,this.headers=e,this.status=g,this.url=h}}class h extends e.C{constructor({body:a,cause:b,details:c,url:e}){super("WebSocket request failed.",{cause:b,details:c,metaMessages:[`URL: ${(0,f.I)(e)}`,a&&`Request body: ${(0,d.A)(a)}`].filter(Boolean),name:"WebSocketRequestError"})}}class i extends e.C{constructor({body:a,error:b,url:c}){super("RPC Request failed.",{cause:b,details:b.message,metaMessages:[`URL: ${(0,f.I)(c)}`,`Request body: ${(0,d.A)(a)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=b.code,this.data=b.data}}class j extends e.C{constructor({url:a}={}){super("The socket has been closed.",{metaMessages:[a&&`URL: ${(0,f.I)(a)}`].filter(Boolean),name:"SocketClosedError"})}}class k extends e.C{constructor({body:a,url:b}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,f.I)(b)}`,`Request body: ${(0,d.A)(a)}`],name:"TimeoutError"})}}},37502:(a,b,c)=>{c.d(b,{I:()=>e,R:()=>d});let d=a=>a,e=a=>a},47716:(a,b,c)=>{c.d(b,{Bh:()=>g,CL:()=>i,D5:()=>k,Di:()=>m,G1:()=>E,Gi:()=>j,L5:()=>z,MI:()=>G,Qc:()=>f,RV:()=>w,Sf:()=>v,WT:()=>A,XU:()=>h,YW:()=>p,ab:()=>q,bq:()=>l,cg:()=>C,ch:()=>y,hA:()=>n,hl:()=>B,jz:()=>F,qZ:()=>o,s0:()=>r,sV:()=>u,uL:()=>D,vx:()=>t,xQ:()=>s,xq:()=>x});var d=c(89594),e=c(20482);class f extends d.C{constructor(a,{code:b,docsPath:c,metaMessages:d,name:f,shortMessage:g}){super(g,{cause:a,docsPath:c,metaMessages:d||a?.metaMessages,name:f||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=f||a.name,this.code=a instanceof e.J8?a.code:b??-1}}class g extends f{constructor(a,b){super(a,b),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=b.data}}class h extends f{constructor(a){super(a,{code:h.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class i extends f{constructor(a){super(a,{code:i.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class j extends f{constructor(a,{method:b}={}){super(a,{code:j.code,name:"MethodNotFoundRpcError",shortMessage:`The method${b?` "${b}"`:""} does not exist / is not available.`})}}Object.defineProperty(j,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class k extends f{constructor(a){super(a,{code:k.code,name:"InvalidParamsRpcError",shortMessage:"Invalid parameters were provided to the RPC method.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(k,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class l extends f{constructor(a){super(a,{code:l.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class m extends f{constructor(a){super(a,{code:m.code,name:"InvalidInputRpcError",shortMessage:"Missing or invalid parameters.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class n extends f{constructor(a){super(a,{code:n.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(n,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class o extends f{constructor(a){super(a,{code:o.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class p extends f{constructor(a){super(a,{code:p.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class q extends f{constructor(a,{method:b}={}){super(a,{code:q.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${b?` "${b}"`:""} is not supported.`})}}Object.defineProperty(q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class r extends f{constructor(a){super(a,{code:r.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(r,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class s extends f{constructor(a){super(a,{code:s.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(s,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class t extends g{constructor(a){super(a,{code:t.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(t,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class u extends g{constructor(a){super(a,{code:u.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class v extends g{constructor(a,{method:b}={}){super(a,{code:v.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${b?` " ${b}"`:""}.`})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class w extends g{constructor(a){super(a,{code:w.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class x extends g{constructor(a){super(a,{code:x.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(x,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class y extends g{constructor(a){super(a,{code:y.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class z extends g{constructor(a){super(a,{code:z.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(z,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class A extends g{constructor(a){super(a,{code:A.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(A,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class B extends g{constructor(a){super(a,{code:B.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(B,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class C extends g{constructor(a){super(a,{code:C.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class D extends g{constructor(a){super(a,{code:D.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(D,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class E extends g{constructor(a){super(a,{code:E.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class F extends g{constructor(a){super(a,{code:F.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(F,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class G extends f{constructor(a){super(a,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}}};